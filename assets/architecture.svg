<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520" width="900" height="520">
  <defs>
    <linearGradient id="bg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0d1117"/>
      <stop offset="100%" style="stop-color:#161b22"/>
    </linearGradient>
    <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#4285F4"/>
    </marker>
    <marker id="arrowG" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#22C55E"/>
    </marker>
    <marker id="arrowP" markerWidth="8" markerHeight="8" refX="6" refY="3" orient="auto">
      <path d="M0,0 L0,6 L8,3 z" fill="#6C3EEB"/>
    </marker>
  </defs>
  <rect width="900" height="520" fill="url(#bg)" rx="12"/>
  <text x="450" y="36" font-family="'Segoe UI', sans-serif" font-size="20" font-weight="700" text-anchor="middle" fill="#f0f6fc">ğŸŒ System Architecture</text>

  <!-- USER -->
  <rect x="370" y="60" width="160" height="48" rx="8" fill="#21262d" stroke="#4285F4" stroke-width="2"/>
  <text x="450" y="80" font-family="monospace" font-size="13" font-weight="700" text-anchor="middle" fill="#4285F4">ğŸ‘¤ USER</text>
  <text x="450" y="98" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">Query / Upload</text>

  <!-- Arrow down to Gradio -->
  <line x1="450" y1="108" x2="450" y2="138" stroke="#4285F4" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- GRADIO UI -->
  <rect x="330" y="138" width="240" height="48" rx="8" fill="#21262d" stroke="#FF7C00" stroke-width="2"/>
  <text x="450" y="158" font-family="monospace" font-size="13" font-weight="700" text-anchor="middle" fill="#FF7C00">ğŸ¨ Gradio Web UI</text>
  <text x="450" y="176" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">localhost:7860</text>

  <!-- Arrow down -->
  <line x1="450" y1="186" x2="450" y2="216" stroke="#4285F4" stroke-width="2" marker-end="url(#arrow)"/>

  <!-- ORCHESTRATOR -->
  <rect x="280" y="216" width="340" height="48" rx="8" fill="#1c2128" stroke="#6C3EEB" stroke-width="2"/>
  <text x="450" y="236" font-family="monospace" font-size="13" font-weight="700" text-anchor="middle" fill="#6C3EEB">ğŸ¯ UltimateRAGSystem</text>
  <text x="450" y="254" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">Core Orchestrator Â· Thread Manager</text>

  <!-- Three branches -->
  <!-- Left: Ingestion -->
  <line x1="320" y1="264" x2="160" y2="310" stroke="#22C55E" stroke-width="2" marker-end="url(#arrowG)"/>
  <!-- Center: Retrieval -->
  <line x1="450" y1="264" x2="450" y2="310" stroke="#4285F4" stroke-width="2" marker-end="url(#arrow)"/>
  <!-- Right: Cache -->
  <line x1="580" y1="264" x2="740" y2="310" stroke="#6C3EEB" stroke-width="2" marker-end="url(#arrowP)"/>

  <!-- LEFT BOX: Document Ingestion -->
  <rect x="50" y="310" width="220" height="90" rx="8" fill="#161b22" stroke="#22C55E" stroke-width="2"/>
  <text x="160" y="332" font-family="monospace" font-size="12" font-weight="700" text-anchor="middle" fill="#22C55E">ğŸ“„ Document Ingestion</text>
  <text x="160" y="352" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">PDF Â· DOCX Â· TXT</text>
  <text x="160" y="368" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">Chunking Â· Embedding</text>
  <text x="160" y="384" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">ChromaDB Vector Store</text>

  <!-- CENTER BOX: 7-Step Pipeline -->
  <rect x="295" y="310" width="310" height="90" rx="8" fill="#161b22" stroke="#4285F4" stroke-width="2"/>
  <text x="450" y="332" font-family="monospace" font-size="12" font-weight="700" text-anchor="middle" fill="#4285F4">ğŸ”„ 7-Step RAG Pipeline</text>
  <text x="450" y="352" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">HyDE Â· MultiQuery Â· BM25</text>
  <text x="450" y="368" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">Vector Â· Hybrid Â· Rerank</text>
  <text x="450" y="384" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">Self-RAG Verification</text>

  <!-- RIGHT BOX: Semantic Cache -->
  <rect x="630" y="310" width="220" height="90" rx="8" fill="#161b22" stroke="#6C3EEB" stroke-width="2"/>
  <text x="740" y="332" font-family="monospace" font-size="12" font-weight="700" text-anchor="middle" fill="#6C3EEB">âš¡ Semantic Cache</text>
  <text x="740" y="352" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">Cosine Similarity</text>
  <text x="740" y="368" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">Threshold: 0.85</text>
  <text x="740" y="384" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">Avoids redundant LLM calls</text>

  <!-- Arrows to Gemini LLM -->
  <line x1="160" y1="400" x2="350" y2="438" stroke="#22C55E" stroke-width="2" marker-end="url(#arrowG)"/>
  <line x1="450" y1="400" x2="450" y2="438" stroke="#4285F4" stroke-width="2" marker-end="url(#arrow)"/>
  <line x1="740" y1="400" x2="550" y2="438" stroke="#6C3EEB" stroke-width="2" marker-end="url(#arrowP)"/>

  <!-- Gemini LLM -->
  <rect x="300" y="438" width="300" height="52" rx="8" fill="#21262d" stroke="#4285F4" stroke-width="2"/>
  <text x="450" y="461" font-family="monospace" font-size="13" font-weight="700" text-anchor="middle" fill="#4285F4">ğŸ¤– Google Gemini Flash</text>
  <text x="450" y="479" font-family="monospace" font-size="10" text-anchor="middle" fill="#8b949e">LLM Backbone Â· Answer Generation</text>
</svg>
